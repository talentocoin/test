!function(){var t=window.QRCode=function(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array};t.prototype={addData:function(e){var r=new t.QR8bitByte(e);this.dataList.push(r),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,r),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var r=-1;7>=r;r++)if(!(-1>=t+r||this.moduleCount<=t+r))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(r>=0&&6>=r&&(0==o||6==o)||o>=0&&6>=o&&(0==r||6==r)||r>=2&&4>=r&&o>=2&&4>=o?this.modules[t+r][e+o]=!0:this.modules[t+r][e+o]=!1)},getBestMaskPattern:function(){for(var e=0,r=0,o=0;8>o;o++){this.makeImpl(!0,o);var n=t.Util.getLostPoint(this);(0==o||e>n)&&(e=n,r=o)}return r},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var a=i*n,s=0;s<this.modules[i].length;s++){var u=s*n,h=this.modules[i][s];h&&(o.beginFill(0,100),o.moveTo(u,a),o.lineTo(u+n,a),o.lineTo(u+n,a+n),o.lineTo(u,a+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var e=t.Util.getPatternPosition(this.typeNumber),r=0;r<e.length;r++)for(var o=0;o<e.length;o++){var n=e[r],i=e[o];if(null==this.modules[n][i])for(var a=-2;2>=a;a++)for(var s=-2;2>=s;s++)-2==a||2==a||-2==s||2==s||0==a&&0==s?this.modules[n+a][i+s]=!0:this.modules[n+a][i+s]=!1}},setupTypeNumber:function(e){for(var r=t.Util.getBCHTypeNumber(this.typeNumber),o=0;18>o;o++){var n=!e&&1==(r>>o&1);this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=n}for(var o=0;18>o;o++){var n=!e&&1==(r>>o&1);this.modules[o%3+this.moduleCount-8-3][Math.floor(o/3)]=n}},setupTypeInfo:function(e,r){for(var o=this.errorCorrectLevel<<3|r,n=t.Util.getBCHTypeInfo(o),i=0;15>i;i++){var a=!e&&1==(n>>i&1);6>i?this.modules[i][8]=a:8>i?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(var i=0;15>i;i++){var a=!e&&1==(n>>i&1);8>i?this.modules[8][this.moduleCount-i-1]=a:9>i?this.modules[8][15-i-1+1]=a:this.modules[8][15-i-1]=a}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,r){for(var o=-1,n=this.moduleCount-1,i=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var u=0;2>u;u++)if(null==this.modules[n][s-u]){var h=!1;a<e.length&&(h=1==(e[a]>>>i&1));var l=t.Util.getMask(r,n,s-u);l&&(h=!h),this.modules[n][s-u]=h,i--,-1==i&&(a++,i=7)}if(n+=o,0>n||this.moduleCount<=n){n-=o,o=-o;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,r,o){for(var n=t.RSBlock.getRSBlocks(e,r),i=new t.BitBuffer,a=0;a<o.length;a++){var s=o[a];i.put(s.mode,4),i.put(s.getLength(),t.Util.getLengthInBits(s.mode,e)),s.write(i)}for(var u=0,a=0;a<n.length;a++)u+=n[a].dataCount;if(i.getLengthInBits()>8*u)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*u+")");for(i.getLengthInBits()+4<=8*u&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;;){if(i.getLengthInBits()>=8*u)break;if(i.put(t.PAD0,8),i.getLengthInBits()>=8*u)break;i.put(t.PAD1,8)}return t.createBytes(i,n)},t.createBytes=function(e,r){for(var o=0,n=0,i=0,a=new Array(r.length),s=new Array(r.length),u=0;u<r.length;u++){var h=r[u].dataCount,l=r[u].totalCount-h;n=Math.max(n,h),i=Math.max(i,l),a[u]=new Array(h);for(var f=0;f<a[u].length;f++)a[u][f]=255&e.buffer[f+o];o+=h;var g=t.Util.getErrorCorrectPolynomial(l),c=new t.Polynomial(a[u],g.getLength()-1),d=c.mod(g);s[u]=new Array(g.getLength()-1);for(var f=0;f<s[u].length;f++){var m=f+d.getLength()-s[u].length;s[u][f]=m>=0?d.get(m):0}}for(var v=0,f=0;f<r.length;f++)v+=r[f].totalCount;for(var B=new Array(v),E=0,f=0;n>f;f++)for(var u=0;u<r.length;u++)f<a[u].length&&(B[E++]=a[u][f]);for(var f=0;i>f;f++)for(var u=0;u<r.length;u++)f<s[u].length&&(B[E++]=s[u][f]);return B},t.QR8bitByte=function(e){this.mode=t.Mode.MODE_8BIT_BYTE,this.data=e},t.QR8bitByte.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},t.Mode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},t.ErrorCorrectLevel={L:1,M:0,Q:3,H:2},t.MaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.Util={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var r=e<<10;t.Util.getBCHDigit(r)-t.Util.getBCHDigit(t.Util.G15)>=0;)r^=t.Util.G15<<t.Util.getBCHDigit(r)-t.Util.getBCHDigit(t.Util.G15);return(e<<10|r)^t.Util.G15_MASK},getBCHTypeNumber:function(e){for(var r=e<<12;t.Util.getBCHDigit(r)-t.Util.getBCHDigit(t.Util.G18)>=0;)r^=t.Util.G18<<t.Util.getBCHDigit(r)-t.Util.getBCHDigit(t.Util.G18);return e<<12|r},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(e){return t.Util.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,r,o){switch(e){case t.MaskPattern.PATTERN000:return(r+o)%2==0;case t.MaskPattern.PATTERN001:return r%2==0;case t.MaskPattern.PATTERN010:return o%3==0;case t.MaskPattern.PATTERN011:return(r+o)%3==0;case t.MaskPattern.PATTERN100:return(Math.floor(r/2)+Math.floor(o/3))%2==0;case t.MaskPattern.PATTERN101:return r*o%2+r*o%3==0;case t.MaskPattern.PATTERN110:return(r*o%2+r*o%3)%2==0;case t.MaskPattern.PATTERN111:return(r*o%3+(r+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var r=new t.Polynomial([1],0),o=0;e>o;o++)r=r.multiply(new t.Polynomial([1,t.Math.gexp(o)],0));return r},getLengthInBits:function(e,r){if(r>=1&&10>r)switch(e){case t.Mode.MODE_NUMBER:return 10;case t.Mode.MODE_ALPHA_NUM:return 9;case t.Mode.MODE_8BIT_BYTE:return 8;case t.Mode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>r)switch(e){case t.Mode.MODE_NUMBER:return 12;case t.Mode.MODE_ALPHA_NUM:return 11;case t.Mode.MODE_8BIT_BYTE:return 16;case t.Mode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>r))throw new Error("type:"+r);switch(e){case t.Mode.MODE_NUMBER:return 14;case t.Mode.MODE_ALPHA_NUM:return 13;case t.Mode.MODE_8BIT_BYTE:return 16;case t.Mode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var i=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var u=-1;1>=u;u++)0>n+u||n+u>=e||(0!=s||0!=u)&&a==t.isDark(o+s,n+u)&&i++;i>5&&(r+=3+i-5)}for(var o=0;e-1>o;o++)for(var n=0;e-1>n;n++){var h=0;t.isDark(o,n)&&h++,t.isDark(o+1,n)&&h++,t.isDark(o,n+1)&&h++,t.isDark(o+1,n+1)&&h++,(0==h||4==h)&&(r+=3)}for(var o=0;e>o;o++)for(var n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(r+=40);for(var n=0;e>n;n++)for(var o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(r+=40);for(var l=0,n=0;e>n;n++)for(var o=0;e>o;o++)t.isDark(o,n)&&l++;var f=Math.abs(100*l/e/e-50)/5;return r+=10*f}},t.Math={glog:function(e){if(1>e)throw new Error("glog("+e+")");return t.Math.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return t.Math.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var e=0;8>e;e++)t.Math.EXP_TABLE[e]=1<<e;for(var e=8;256>e;e++)t.Math.EXP_TABLE[e]=t.Math.EXP_TABLE[e-4]^t.Math.EXP_TABLE[e-5]^t.Math.EXP_TABLE[e-6]^t.Math.EXP_TABLE[e-8];for(var e=0;255>e;e++)t.Math.LOG_TABLE[t.Math.EXP_TABLE[e]]=e;t.Polynomial=function(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]},t.Polynomial.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(e){for(var r=new Array(this.getLength()+e.getLength()-1),o=0;o<this.getLength();o++)for(var n=0;n<e.getLength();n++)r[o+n]^=t.Math.gexp(t.Math.glog(this.get(o))+t.Math.glog(e.get(n)));return new t.Polynomial(r,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var r=t.Math.glog(this.get(0))-t.Math.glog(e.get(0)),o=new Array(this.getLength()),n=0;n<this.getLength();n++)o[n]=this.get(n);for(var n=0;n<e.getLength();n++)o[n]^=t.Math.gexp(t.Math.glog(e.get(n))+r);return new t.Polynomial(o,0).mod(e)}},t.RSBlock=function(t,e){this.totalCount=t,this.dataCount=e},t.RSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],t.RSBlock.getRSBlocks=function(e,r){var o=t.RSBlock.getRsBlockTable(e,r);if(void 0==o)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var n=o.length/3,i=new Array,a=0;n>a;a++)for(var s=o[3*a+0],u=o[3*a+1],h=o[3*a+2],l=0;s>l;l++)i.push(new t.RSBlock(u,h));return i},t.RSBlock.getRsBlockTable=function(e,r){switch(r){case t.ErrorCorrectLevel.L:return t.RSBlock.RS_BLOCK_TABLE[4*(e-1)+0];case t.ErrorCorrectLevel.M:return t.RSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case t.ErrorCorrectLevel.Q:return t.RSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case t.ErrorCorrectLevel.H:return t.RSBlock.RS_BLOCK_TABLE[4*(e-1)+3];default:return void 0}},t.BitBuffer=function(){this.buffer=new Array,this.length=0},t.BitBuffer.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var r=0;e>r;r++)this.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}}();
